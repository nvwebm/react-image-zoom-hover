{"version":3,"file":"index.js","sources":["../src/helpers/getImageRealWidthAndHeight.ts","../src/helpers/calcRelationalDimensions.ts","../src/helpers/calcRelationalPoint.ts","../src/helpers/getImageWidthAndHeight.ts","../src/index.tsx"],"sourcesContent":["import Dimensions from \"../interfaces/Dimensions\";\r\n\r\nfunction getRealImageWidthAndHeight(img: HTMLImageElement): Dimensions {\r\n  return {\r\n    width: img.naturalWidth,\r\n    height: img.naturalHeight\r\n  }\r\n}\r\n\r\nexport default getRealImageWidthAndHeight;","import Dimensions from '../interfaces/Dimensions'\r\nimport getRealImageWidthAndHeight from './getImageRealWidthAndHeight'\r\n\r\nfunction calcRelationalDimensions(\r\n  img: HTMLImageElement,\r\n  dimensions: Dimensions\r\n): Dimensions {\r\n  const { width, height } = getRealImageWidthAndHeight(img)\r\n  const relation = {\r\n    width: width / dimensions.width,\r\n    height: height / dimensions.height\r\n  }\r\n  return relation\r\n}\r\n\r\nexport default calcRelationalDimensions\r\n","function calcRelationalPoint(\r\n  point: number,\r\n  relation: number,\r\n  zoomContainerDimension: number,\r\n  zoomImageDimension: number\r\n): number {\r\n  const zoomedPoint = point * relation - zoomContainerDimension / 2\r\n  if (zoomImageDimension - zoomedPoint < zoomContainerDimension)\r\n    return zoomImageDimension - zoomContainerDimension\r\n  return zoomedPoint\r\n}\r\n\r\nexport default calcRelationalPoint;","import Dimensions from '../interfaces/Dimensions'\r\n\r\nfunction getImageWidthAndHeight(img: HTMLImageElement): Dimensions {\r\n  return {\r\n    width: img.clientWidth,\r\n    height: img.clientHeight\r\n  }\r\n}\r\nexport default getImageWidthAndHeight\r\n","import * as React from 'react'\nimport calcRelationalDimensions from './helpers/calcRelationalDimensions';\nimport calcRelationalPoint from './helpers/calcRelationalPoint';\nimport getRealImageWidthAndHeight from './helpers/getImageRealWidthAndHeight';\nimport getImageWidthAndHeight from './helpers/getImageWidthAndHeight';\nimport Dimensions from './interfaces/Dimensions';\ninterface Props\n{\n  children: React.ReactHTMLElement<HTMLImageElement>;\n  bigImage: string;\n}\n\nexport const ImageZoom = ({ children, bigImage }: Props) =>\n{\n  const imageContainerRef = React.createRef<HTMLDivElement>();\n  const zoomContainerRef = React.createRef<HTMLDivElement>();\n  const [relationalDimensions, setRelationalDimensions] = React.useState<Dimensions>({ width: 0, height: 0 });\n  const [zoomContainerDimension, setZoomContainerDimension] = React.useState<Dimensions>({ width: 0, height: 0 });\n  const [realImageDimensions, setRealImageDimensions] = React.useState<Dimensions>({ width: 0, height: 0 });\n\n  const [imageTag, setImageTag] = React.useState<HTMLImageElement>(null as unknown as HTMLImageElement);\n  const [isMouseOver, setIsMouseOver] = React.useState(false);\n  const [zoomXPosition, setZoomXPosition] = React.useState(0);\n  const [zoomYPosition, setZoomYPosition] = React.useState(0);\n  const mouseEnter = () => setIsMouseOver(true);\n  const mouseLeave = () => setIsMouseOver(false);\n  const movement = (offsetX: number, offsetY: number) =>\n  {\n    setZoomXPosition(offsetX);\n    setZoomYPosition(offsetY);\n  }\n  const mouseMove = (e: MouseEvent) =>\n  {\n    const { offsetX, offsetY } = e;\n    movement(offsetX, offsetY);\n  }\n  const touchMove = (e: TouchEvent, left: number, top: number) =>\n  {\n    const lastTouchEvent = e.changedTouches[e.changedTouches.length - 1];\n    const offsetX = lastTouchEvent.pageX - left;\n    const offsetY = lastTouchEvent.pageY - top;\n    if (offsetX > zoomContainerDimension.width) setIsMouseOver(false);\n    if (offsetY > zoomContainerDimension.height) setIsMouseOver(false);\n\n    movement(offsetX, offsetY);\n  }\n\n  React.useEffect(() =>\n  {\n    if (!imageTag) return;\n    imageTag.addEventListener('mousemove', mouseMove);\n    imageTag.addEventListener('mouseenter', mouseEnter);\n    imageTag.addEventListener('mouseleave', mouseLeave);\n    imageTag.addEventListener('touchstart', mouseEnter);\n    imageTag.addEventListener('touchcancel', mouseLeave);\n    imageTag.addEventListener('touchend', mouseLeave);\n\n    const imagePagePosition = imageTag.getBoundingClientRect();\n    const touchMoveHandler = (e: TouchEvent) => touchMove(e, imagePagePosition.left, imagePagePosition.top);\n    imageTag.addEventListener('touchmove', touchMoveHandler);\n\n    const localDimensions = getImageWidthAndHeight(imageTag);\n    const localRelationalDimensions = calcRelationalDimensions(imageTag, localDimensions);\n    const realImageDiemsions = getRealImageWidthAndHeight(imageTag);\n    setRelationalDimensions(localRelationalDimensions);\n    setRealImageDimensions(realImageDiemsions);\n\n    return () =>\n    {\n      imageTag.removeEventListener('mouseenter', mouseEnter);\n      imageTag.removeEventListener('mouseleave', mouseLeave);\n      imageTag.removeEventListener('mousemove', mouseMove);\n      imageTag.removeEventListener('touchstart', mouseEnter);\n      imageTag.removeEventListener('touchcancel', mouseLeave);\n      imageTag.removeEventListener('touchend', mouseLeave);\n      imageTag.removeEventListener('touchmove', touchMoveHandler);\n    }\n  }, [imageTag]);\n  React.useEffect(() =>\n  {\n    if (!zoomContainerRef.current) return;\n    const computedStyle = getComputedStyle(zoomContainerRef.current);\n    setZoomContainerDimension({ width: parseFloat(computedStyle.width), height: parseFloat(computedStyle.height) });\n\n  }, [zoomContainerRef.current])\n  return (\n    <div\n      className='react-image-zoom-container'\n      onLoad={() => setImageTag(imageContainerRef!.current!.children[0] as HTMLImageElement)}\n      ref={imageContainerRef}\n    >\n      {children}\n      <div\n        className='react-image-zoom-inner-container'\n        ref={zoomContainerRef}\n        style={\n          {\n            display: isMouseOver ? 'block' : 'none',\n            left: `${zoomXPosition + 5}px`,\n            top: `${zoomYPosition + 5}px`\n          }}>\n        <img alt={children.props.src} src={bigImage} className=\"react-image-zoom-inner-zoomed-image\" style={{\n          top: `-${calcRelationalPoint(zoomYPosition, relationalDimensions.height, zoomContainerDimension.height, realImageDimensions.height)}px`,\n          left: `-${calcRelationalPoint(zoomXPosition, relationalDimensions.width, zoomContainerDimension.width, realImageDimensions.width)}px`,\n\n        }} />\n      </div>\n    </div>)\n}\n"],"names":["getRealImageWidthAndHeight","img","width","naturalWidth","height","naturalHeight","calcRelationalDimensions","dimensions","relation","calcRelationalPoint","point","zoomContainerDimension","zoomImageDimension","zoomedPoint","getImageWidthAndHeight","clientWidth","clientHeight","ImageZoom","children","bigImage","imageContainerRef","React","zoomContainerRef","relationalDimensions","setRelationalDimensions","setZoomContainerDimension","realImageDimensions","setRealImageDimensions","imageTag","setImageTag","isMouseOver","setIsMouseOver","zoomXPosition","setZoomXPosition","zoomYPosition","setZoomYPosition","mouseEnter","mouseLeave","movement","offsetX","offsetY","mouseMove","e","touchMove","left","top","lastTouchEvent","changedTouches","length","pageX","pageY","addEventListener","imagePagePosition","getBoundingClientRect","touchMoveHandler","localDimensions","localRelationalDimensions","realImageDiemsions","removeEventListener","current","computedStyle","getComputedStyle","parseFloat","className","onLoad","ref","style","display","alt","props","src"],"mappings":"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"}
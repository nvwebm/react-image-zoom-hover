{"version":3,"file":"index.js","sources":["../src/helpers/getImageRealWidthAndHeight.ts","../src/helpers/calcRelationalDimensions.ts","../src/helpers/calcRelationalPoint.ts","../src/helpers/getImageWidthAndHeight.ts","../src/index.tsx"],"sourcesContent":["import Dimensions from \"../interfaces/Dimensions\";\r\n\r\nfunction getRealImageWidthAndHeight(img: HTMLImageElement): Dimensions {\r\n  return {\r\n    width: img.naturalWidth,\r\n    height: img.naturalHeight\r\n  }\r\n}\r\n\r\nexport default getRealImageWidthAndHeight;","import Dimensions from '../interfaces/Dimensions'\r\nimport getRealImageWidthAndHeight from './getImageRealWidthAndHeight'\r\n\r\nfunction calcRelationalDimensions(\r\n  img: HTMLImageElement,\r\n  dimensions: Dimensions\r\n): Dimensions {\r\n  const { width, height } = getRealImageWidthAndHeight(img)\r\n  const relation = {\r\n    width: width / dimensions.width,\r\n    height: height / dimensions.height\r\n  }\r\n  return relation\r\n}\r\n\r\nexport default calcRelationalDimensions\r\n","function calcRelationalPoint(\r\n  point: number,\r\n  relation: number,\r\n  zoomContainerDimension: number,\r\n  zoomImageDimension: number\r\n): number {\r\n  const zoomedPoint = point * relation - zoomContainerDimension / 2\r\n  if (zoomImageDimension - zoomedPoint < zoomContainerDimension)\r\n    return zoomImageDimension - zoomContainerDimension\r\n  return zoomedPoint\r\n}\r\n\r\nexport default calcRelationalPoint;","import Dimensions from '../interfaces/Dimensions'\r\n\r\nfunction getImageWidthAndHeight(img: HTMLImageElement): Dimensions {\r\n  return {\r\n    width: img.clientWidth,\r\n    height: img.clientHeight\r\n  }\r\n}\r\nexport default getImageWidthAndHeight\r\n","import * as React from 'react'\nimport calcRelationalDimensions from './helpers/calcRelationalDimensions';\nimport calcRelationalPoint from './helpers/calcRelationalPoint';\nimport getRealImageWidthAndHeight from './helpers/getImageRealWidthAndHeight';\nimport getImageWidthAndHeight from './helpers/getImageWidthAndHeight';\nimport Dimensions from './interfaces/Dimensions';\ninterface Props\n{\n  children: React.ReactHTMLElement<HTMLImageElement>;\n  bigImage: string;\n  \n}\n\nexport const ImageZoom = ({ children, bigImage }: Props) =>\n{\n  const imageContainerRef = React.createRef<HTMLDivElement>();\n  const zoomContainerRef = React.createRef<HTMLDivElement>();\n  const [relationalDimensions, setRelationalDimensions] = React.useState<Dimensions>({ width: 0, height: 0 });\n  const [zoomContainerDimension, setZoomContainerDimension] = React.useState<Dimensions>({ width: 0, height: 0 });\n  const [realImageDimensions, setRealImageDimensions] = React.useState<Dimensions>({ width: 0, height: 0 });\n\n  const [imageTag, setImageTag] = React.useState<HTMLImageElement>(null as unknown as HTMLImageElement);\n  const [isMouseOver, setIsMouseOver] = React.useState(false);\n  const [zoomXPosition, setZoomXPosition] = React.useState(0);\n  const [zoomYPosition, setZoomYPosition] = React.useState(0);\n  const mouseEnter = () => setIsMouseOver(true);\n  const mouseLeave = () => setIsMouseOver(false);\n  const mouseMove = (e: MouseEvent) =>\n  {\n    const { offsetX, offsetY } = e;\n    setZoomXPosition(offsetX);\n    setZoomYPosition(offsetY);\n  }\n  React.useEffect(() =>\n  {\n    if (!imageTag) return;\n    imageTag.addEventListener('mousemove', mouseMove);\n    imageTag.addEventListener('mouseenter', mouseEnter);\n    imageTag.addEventListener('mouseleave', mouseLeave);\n\n    const localDimensions = getImageWidthAndHeight(imageTag);\n    const localRelationalDimensions = calcRelationalDimensions(imageTag, localDimensions);\n    const realImageDiemsions = getRealImageWidthAndHeight(imageTag);\n\n    setRelationalDimensions(localRelationalDimensions);\n    setRealImageDimensions(realImageDiemsions);\n    \n    return () =>\n    {\n      imageTag.removeEventListener('mouseenter', mouseEnter);\n      imageTag.removeEventListener('mouseleave', mouseLeave);\n      imageTag.removeEventListener('mousemove', mouseMove);\n    }\n  }, [imageTag]);\n  React.useEffect(() =>\n  {\n    if (!zoomContainerRef.current) return;\n    const computedStyle = getComputedStyle(zoomContainerRef.current);\n    setZoomContainerDimension({ width: parseFloat(computedStyle.width), height: parseFloat(computedStyle.height) });\n\n  }, [zoomContainerRef.current])\n  return (\n    <div\n      className='react-image-zoom-container'\n      onLoad={() => setImageTag(imageContainerRef!.current!.children[0] as HTMLImageElement)}\n      ref={imageContainerRef}\n    >\n      {children}\n      <div\n        className='react-image-zoom-inner-container'\n        ref={zoomContainerRef}\n        style={\n          {\n            display: isMouseOver ? 'block' : 'none',\n            left: `${zoomXPosition + 5}px`,\n            top: `${zoomYPosition + 5}px`\n          }}>\n        <img alt={children.props.src} src={bigImage} className=\"react-image-zoom-inner-zoomed-image\" style={{\n          top: `-${calcRelationalPoint(zoomYPosition, relationalDimensions.height, zoomContainerDimension.height, realImageDimensions.height)}px`,\n          left: `-${calcRelationalPoint(zoomXPosition, relationalDimensions.width, zoomContainerDimension.width, realImageDimensions.width)}px`,\n\n        }} />\n      </div>\n    </div>)\n}\n"],"names":["getRealImageWidthAndHeight","img","width","naturalWidth","height","naturalHeight","calcRelationalDimensions","dimensions","relation","calcRelationalPoint","point","zoomContainerDimension","zoomImageDimension","zoomedPoint","getImageWidthAndHeight","clientWidth","clientHeight","ImageZoom","children","bigImage","imageContainerRef","React","zoomContainerRef","relationalDimensions","setRelationalDimensions","setZoomContainerDimension","realImageDimensions","setRealImageDimensions","imageTag","setImageTag","isMouseOver","setIsMouseOver","zoomXPosition","setZoomXPosition","zoomYPosition","setZoomYPosition","mouseEnter","mouseLeave","mouseMove","e","offsetX","offsetY","addEventListener","localDimensions","localRelationalDimensions","realImageDiemsions","removeEventListener","current","computedStyle","getComputedStyle","parseFloat","className","onLoad","ref","style","display","left","top","alt","props","src"],"mappings":"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"}